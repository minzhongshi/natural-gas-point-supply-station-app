"use strict";const i=require("../../common/vendor.js"),t={name:"s-region-slider",props:{fillValue:{type:Number,default:1e3},fillMinValue:{type:Number,default:0},minValue:{type:Number,default:0},maxValue:{type:Number,default:1e3},step:{type:Number,default:50}},watch:{minValue(i,t){i<this.fillMinValue||this.maxValue>this.fillValue?console.error(`请在${this.fillMinValue}-${this.fillValue}范围中设置`):(this.sMinValue=i-this.fillMinValue,this.showMinNum=i,this.minLeft=this.sMinValue/this.percentage)},maxValue(i,t){this.minValue<this.fillMinValue||i>this.fillValue?console.error(`请在${this.fillMinValue}-${this.fillValue}范围中设置`):(this.sMaxValue=i-this.fillMinValue,this.showMaxNum=i,this.maxLeft=this.sMaxValue/this.percentage)},fillValue(i,t){this.sFillValue=this.fillValue}},data:()=>({tipShow:!1,tipLeft:0,minLeft:0,maxLeft:0,touchWidth:30,lineWidth:0,lineLeft:0,showMinNum:0,showMaxNum:0,curValue:0,sMinValue:0,sMaxValue:0,sFillValue:0,sFillMinValue:0,percentage:0}),mounted(){this.$nextTick().then((()=>{this.envir({classname:".fj-touch-left",refname:this.$refs.fjtouchleft,fn:i=>{this.touchWidth=i.width}}),this.envir({classname:".fj-line",refname:this.$refs["fj-line"],fn:i=>{this.lineWidth=i.width,this.lineLeft=i.left,this.sMinValue=this.minValue-this.fillMinValue>0?this.minValue-this.fillMinValue:0,this.sMaxValue=this.maxValue-this.fillMinValue>0?this.maxValue-this.fillMinValue:0,this.sFillValue=this.fillValue-this.fillMinValue>0?this.fillValue-this.fillMinValue:0,this.percentage=this.sFillValue/this.lineWidth,this.minLeft=this.sMinValue/this.percentage,this.maxLeft=this.sMaxValue/this.percentage,this.showMaxNum=this.sMaxValue+this.fillMinValue,this.showMinNum=this.sMinValue+this.fillMinValue}})}))},methods:{envir(t){setTimeout((()=>{var e;(e=this,i.index.createSelectorQuery().in(e)).select(t.classname).boundingClientRect().exec((i=>{const e=i[0];t.fn({width:e.width,height:e.height,top:e.top,bottom:e.bottom,left:e.left,right:e.right})}))}),200)},touchstart(i,t){this.$emit("down",{...i,custom:{type:t,minValue:this.showMinNum,maxValue:this.showMaxNum}})},touchmove(i,t){const e=i.touches[0].clientX-this.lineLeft;if(!(e<0||e>this.lineWidth)){if("min"===t){if(this.minLeft=Math.floor(e),this.minLeft<0)return void(this.minLeft=0);if(this.maxLeft>this.lineWidth)return void(this.maxLeft=this.lineWidth);this.curValue=Math.floor(this.minLeft*this.percentage)}if("max"===t){if(this.maxLeft=Math.ceil(e),this.minLeft<0)return void(this.minLeft=0);if(this.maxLeft>this.lineWidth)return void(this.maxLeft=this.lineWidth);this.curValue=Math.round(this.maxLeft*this.percentage)}this.tipShow=!0,this.tipLeft=Math.round(this.curValue/this.percentage),this.tipLeft=this.tipLeft>=this.lineWidth?this.lineWidth:this.tipLeft,this.tipLeft=this.tipLeft<=0?0:this.tipLeft,this.curValue=this.curValue+this.fillMinValue,this.$emit("move",{...i,custom:{type:t,minValue:this.showMinNum,maxValue:this.showMaxNum,curValue:this.curValue}})}},touchend(i,t){if("min"===t)if(1===this.step)this.sMinValue=this.curValue-this.fillMinValue;else{const i=Math.round(this.minLeft*this.percentage/this.step);this.sMinValue=i*this.step,this.minLeft=this.sMinValue/this.percentage}if("max"===t)if(1===this.step)this.sMaxValue=this.curValue-this.fillMinValue;else{const i=Math.round(this.maxLeft*this.percentage/this.step);this.sMaxValue=i*this.step,this.sFillValue-this.sMaxValue<this.step&&(this.sMaxValue=this.sFillValue),this.maxLeft=this.sMaxValue/this.percentage}this.tipShow=!1,this.sMinValue<=this.sMaxValue?(this.showMaxNum=this.sMaxValue+this.fillMinValue,this.showMinNum=this.sMinValue+this.fillMinValue):(this.showMaxNum=this.sMinValue+this.fillMinValue,this.showMinNum=this.sMaxValue+this.fillMinValue),this.$emit("up",{...i,custom:{type:t,minValue:this.showMinNum<this.fillMinValue?this.fillMinValue:this.showMinNum,maxValue:this.showMaxNum>this.fillValue?this.fillValue:this.showMaxNum}})}}};const e=i._export_sfc(t,[["render",function(t,e,s,h,l,a){return i.e({a:0===l.lineLeft?"1":"0",b:i.t(s.fillMinValue),c:l.showMinNum===s.fillMinValue?"#333":"#999",d:i.t(s.fillValue),e:l.showMaxNum===s.fillValue?"#333":"#999",f:i.t(l.curValue),g:`${l.tipLeft}px`,h:l.tipShow?"1":"0",i:l.maxLeft-l.minLeft>=0},l.maxLeft-l.minLeft>=0?{j:`${l.minLeft+l.touchWidth/2}px`,k:`${Math.abs(l.maxLeft-l.minLeft)}px`}:{l:l.minLeft+l.touchWidth/2-Math.abs(l.maxLeft-l.minLeft)+"px",m:`${Math.abs(l.maxLeft-l.minLeft)}px`},{n:i.o((i=>a.touchstart(i,"min"))),o:i.o((i=>a.touchmove(i,"min"))),p:i.o((i=>a.touchend(i,"min"))),q:`${l.minLeft}px`,r:i.o((i=>a.touchstart(i,"max"))),s:i.o((i=>a.touchmove(i,"max"))),t:i.o((i=>a.touchend(i,"max"))),v:`${l.maxLeft}px`,w:0!==l.lineLeft?"1":"0"})}],["__scopeId","data-v-e9b93f0d"]]);wx.createComponent(e);
