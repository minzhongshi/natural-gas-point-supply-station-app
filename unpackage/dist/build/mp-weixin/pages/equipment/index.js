"use strict";const e=require("../../common/vendor.js"),a=require("../../uni_modules/u-ajax/js_sdk/index.js"),t=require("../../api/user/device.js"),s=require("../../stores/counter.js");require("../../uni_modules/u-ajax/js_sdk/lib/core/Ajax.js"),require("../../uni_modules/u-ajax/js_sdk/lib/core/InterceptorManager.js"),require("../../uni_modules/u-ajax/js_sdk/lib/helpers/buildURL.js"),require("../../uni_modules/u-ajax/js_sdk/lib/utils.js"),require("../../uni_modules/u-ajax/js_sdk/lib/helpers/mergeConfig.js"),require("../../uni_modules/u-ajax/js_sdk/lib/core/dispatchRequest.js"),require("../../uni_modules/u-ajax/js_sdk/lib/helpers/isCallback.js"),require("../../uni_modules/u-ajax/js_sdk/lib/defaults.js"),require("../../uni_modules/u-ajax/js_sdk/lib/adapters/http.js"),require("../../uni_modules/u-ajax/js_sdk/lib/core/handleCancel.js"),require("../../uni_modules/u-ajax/js_sdk/lib/adapters/Fetcher.js");const i=s.userAccountStore(),o={components:{areaCard:()=>"./area/areaCard.js"},data:()=>({isshow:!1,timer:null,message:"",area:"",address:{province:"",city:"",county:""},status:"loading",contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多"},state:{areaId:null,name:"",state:null},items:[],parameter:[]}),created(){this.standList()},onShow(){this.standList(),this.getMessage()},onReachBottom:function(){this.status="more",this.loadMoreFunc()},mounted(){},destroyed(){clearTimeout(this.timer)},onHide(){clearTimeout(this.timer)},methods:{search(a){e.index.showToast({title:"搜索："+a.value,icon:"none"})},blur(a){e.index.showToast({title:"blur事件，输入值为："+a.value,icon:"none"})},bindPickerChange(e){this.state.areaId=e.detail.value[2].value,this.standList()},onnodeclick(e){console.log(e)},clickContent(a){e.index.navigateTo({url:"/pages/equipment/area/areaContent?data="+encodeURIComponent(JSON.stringify(a))})},standList(){e.index.showLoading({title:"加载中"}),a.ajax.post({url:t.API.DEVIE_SITE,data:{...this.state}}).then((a=>{200===a.data.code?this.parameter=a.data.data:e.index.showToast({icon:"error",title:a.data.msg,duration:2e3}),e.index.hideLoading()}))},search(e){this.state.name=e.value,this.standList()},getAreaList(){e.index.showLoading({title:"加载中"}),a.ajax.get({url:t.API.DEVIE_AREA}).then((a=>{200===a.data.code?this.items=a.data.data:e.index.showToast({icon:"error",title:a.data.msg,duration:2e3}),e.index.hideLoading()}))},searchClear(e){this.state.name="",this.state.areaId=null,this.state.state=null,this.standList()},getMessage(){a.ajax.post({url:t.API.DEVIE_MESSAGE,data:{id:i.information.id},header:{"Content-type":"application/x-www-form-urlencoded"}}).then((a=>{if(200===a.data.code){if(0!==a.data.data.length){let t=a.data.data;this.isshow=!0,e.wx$1.vibrateLong({success(){console.log("微信震动")}});let s="";t.forEach((e=>{s=s+"("+e.site+")"})),this.message=s}}else e.index.showToast({icon:"error",title:a.data.msg,duration:2e3});this.timer=setTimeout((()=>{clearTimeout(this.timer),this.getMessage()}),7e3)}))},goMessage(){e.index.switchTab({url:"/pages/message/index",animationType:"pop-in",animationDuration:300})}}};if(!Array){(e.resolveComponent("uni-data-picker")+e.resolveComponent("uni-search-bar")+e.resolveComponent("areaCard")+e.resolveComponent("uni-grid-item")+e.resolveComponent("uni-grid")+e.resolveComponent("zwy-popup"))()}Math||((()=>"../../uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker.js")+(()=>"../../uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar.js")+(()=>"../../uni_modules/uni-grid/components/uni-grid-item/uni-grid-item.js")+(()=>"../../uni_modules/uni-grid/components/uni-grid/uni-grid.js")+(()=>"../../uni_modules/zwy-popup/components/zwy-popup/zwy-popup.js"))();const n=e._export_sfc(o,[["render",function(a,t,s,i,o,n){return{a:e.o(n.getAreaList),b:e.o(n.bindPickerChange),c:e.o((e=>o.area=e)),d:e.p({localdata:o.items,placeholder:"点击选择地区","popup-title":"请选择地区","clear-icon":!1,modelValue:o.area}),e:e.o(n.searchClear),f:e.o(n.search),g:e.o((e=>o.state.name=e)),h:e.p({placeholder:"请输入关键字搜索",cancelButton:"none",bgColor:"#EEEEEE",focus:!0,radius:100,modelValue:o.state.name}),i:e.f(o.parameter,((a,t,s)=>({a:"95a6c4ae-4-"+s+",95a6c4ae-3-"+s,b:e.p({parameter:a}),c:e.o((e=>n.clickContent(a)),t),d:t,e:"95a6c4ae-3-"+s+",95a6c4ae-2"}))),j:e.p({column:2,showBorder:!1,square:!1,highlight:!1}),k:e.t(this.message),l:e.o(((...e)=>n.goMessage&&n.goMessage(...e))),m:e.o((e=>o.isshow=!1)),n:e.p({ishide:o.isshow,width:"466rpx",height:"500rpx",radius:"16rpx"})}}],["__scopeId","data-v-95a6c4ae"]]);wx.createPage(n);
